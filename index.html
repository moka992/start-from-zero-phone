<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>手机设计经营模拟器（多级版）</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700;800&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg"></div>
  <main class="app">
    <header class="top">
      <h1>手机设计经营模拟器</h1>
      <p>先抽取并选择本局市场环境，再进入硬件设计与经营周期。</p>
      <div class="stats">
        <div><span>现金</span><strong id="cash">¥10,000,000</strong></div>
        <div><span>库存</span><strong id="inv">0</strong></div>
        <div><span>口碑</span><strong id="rating">50</strong></div>
        <div><span>月数</span><strong id="month">0</strong></div>
      </div>
      <div class="stepper">
        <span id="stepEvt" class="active">① 市场关卡</span>
        <span id="stepCfg">② 设计关卡</span>
        <span id="stepRun">③ 运营关卡</span>
      </div>
    </header>

    <section id="stageEvent" class="panel">
      <h2>第一层：选择本局市场 Buff / Debuff</h2>
      <div class="grid3">
        <label>企业成立区域
          <select id="region"></select>
        </label>
        <label>企业名称
          <input id="companyName" type="text" maxlength="24" placeholder="输入你的手机企业名" />
        </label>
        <label>启动难度
          <select id="startupDifficulty">
            <option value="real" selected>真实</option>
            <option value="hard">困难</option>
          </select>
        </label>
      </div>
      <div id="companyNameHint" class="muted">企业名称需为 2~24 个字符，仅支持中文和英文字母，且不得包含违禁词或主流品牌名。</div>
      <div class="row">
        <button id="rollEvents" class="accent">刷新 3 个市场环境</button>
        <div id="eventHint" class="muted">请选择 1 个，它将影响整局。</div>
      </div>
      <div id="eventCards" class="cards"></div>
      <div class="row">
        <button id="confirmEvent" disabled>确认进入设计关卡</button>
      </div>
    </section>

    <section id="stageConfig" class="panel hidden">
      <h2>第二层：手机详细配置</h2>
      <div class="grid3">
        <label>SoC
          <select id="soc"></select>
        </label>
        <label>机型命名（英文/拼音+数字）
          <input id="modelBaseName" type="text" maxlength="20" placeholder="例如 Neo9 / xuanjing15" />
        </label>
        <label>定价（元）
          <input id="price" type="number" min="999" max="19999" step="100" value="3999" />
        </label>
      </div>
      <div id="modelNameHint" class="muted">机型命名需为 2~20 位，仅支持英文字母和数字，并通过违禁词与品牌词审查。</div>

      <h3>屏幕系统</h3>
      <div class="grid4">
        <label>材质
          <select id="dispMat">
            <option value="lcd">LCD</option>
            <option value="oled" selected>OLED</option>
            <option value="dual_oled">双层 OLED</option>
            <option value="eink">墨水屏</option>
            <option value="foldable">折叠屏</option>
          </select>
        </label>
        <label>供应商
          <select id="dispVendor"></select>
        </label>
        <label>尺寸（英寸）
          <input id="dispSize" type="number" min="3.0" max="9.0" step="0.1" value="6.67" />
        </label>
        <label>比例
          <select id="dispRatio">
            <option value="16:9">16:9</option>
            <option value="18:9">18:9</option>
            <option value="19.5:9" selected>19.5:9</option>
            <option value="20:9">20:9</option>
            <option value="21:9">21:9</option>
            <option value="16:10">16:10</option>
            <option value="4:3">4:3</option>
          </select>
        </label>
        <label>屏幕形态
          <select id="dispForm"></select>
        </label>
      </div>
      <div class="checks" id="displayFeatures">
        <label><input type="checkbox" value="high_refresh" checked /> 高刷新率</label>
        <label><input type="checkbox" value="high_res" checked /> 高分辨率</label>
        <label><input type="checkbox" value="p3" checked /> P3 高色域</label>
        <label><input type="checkbox" value="eye" /> 护眼认证</label>
        <label><input type="checkbox" value="ltpo" /> LTPO 自适应刷新</label>
        <label><input type="checkbox" value="high_pwm" /> 高频 PWM 调光</label>
      </div>
      <div id="displayQuickBox" class="box">屏幕预览：等待计算。</div>

      <div class="grid4">
        <label>机身材质
          <select id="body"></select>
        </label>
        <label>电池容量（mAh）
          <input id="battery" type="number" min="3000" max="10000" step="100" value="5000" />
        </label>
      </div>

      <h3>供应链采购方案（3档）</h3>
      <div class="grid3">
        <label>核心部件统一采购合约
          <select id="procurementPlan"></select>
        </label>
      </div>

      <h3>摄像头系统（可选数量）</h3>
      <div class="grid4">
        <label>主摄
          <select id="camMain"></select>
        </label>
        <label>超广角
          <select id="camUltra"></select>
        </label>
        <label>长焦/潜望
          <select id="camTele"></select>
        </label>
        <label>前摄
          <select id="camFront"></select>
        </label>
      </div>

      <h3>额外特色（影响成本/重量/销量）</h3>
      <div class="checks" id="extras"></div>

      <h3>营销策略（影响线上/爱好者转化）</h3>
      <div class="grid3">
        <label>营销主打法
          <select id="marketingFocus"></select>
        </label>
        <label>首发营销预算
          <select id="campaignLevel"></select>
        </label>
      </div>

      <div class="grid4">
        <label>首批产量（台）
          <input id="units" type="number" min="1000" max="150000" step="1000" value="12000" />
        </label>
        <label>机身高度（mm）
          <input id="phoneH" type="number" min="80" max="260" step="0.1" value="169.0" />
        </label>
        <label>机身宽度（mm）
          <input id="phoneW" type="number" min="35" max="180" step="0.1" value="78.0" />
        </label>
        <label>机身厚度（mm）
          <input id="phoneT" type="number" min="6.5" max="14.0" step="0.1" value="10.2" />
        </label>
      </div>

      <h3>存储 SKU 配置（放在设计末尾）</h3>
      <div class="box" id="skuBox">
        <div class="row">
          <div class="tiny">默认 1 个 SKU，可手动新增。首发配比总和需为 100%。</div>
          <button type="button" id="addSku">新增 SKU</button>
        </div>
        <div id="skuList"></div>
      </div>

      <div class="row">
        <button id="preview">预估成本/重量/风险</button>
        <button id="launch" class="accent">立项并开售</button>
      </div>
      <div id="previewBox" class="box">等待计算。</div>
    </section>

    <section id="stageRun" class="panel hidden">
      <h2>第三层：产品周期运营</h2>
      <div class="row">
        <button id="nextMonth" class="accent">推进 1 个月</button>
        <button id="restock">追加生产</button>
        <button id="takeLoan">使用本代贷款</button>
        <button id="declineLoan">放弃本代贷款</button>
        <button id="continueNext" class="hidden">进入下一代机型</button>
        <button id="stop">产品停产结算</button>
        <button id="endCompany">企业结算</button>
        <button id="restart">重开新局</button>
      </div>
      <div class="grid3">
        <label>补货 SKU
          <select id="restockSku"></select>
        </label>
        <label>补货数量（台）
          <input id="restockUnits" type="number" min="1000" max="200000" step="1000" value="10000" />
        </label>
      </div>
      <div id="marketBox" class="box">等待开售。</div>
      <div class="box">
        <div class="tiny">公司趋势图（横轴：公司经营月）</div>
        <canvas id="opsChart" class="ops-chart" height="260"></canvas>
      </div>
      <div id="reportBox" class="box">等待月报。</div>
      <div id="finalBox" class="box">结算后显示最终表现。</div>
    </section>

    <section class="panel source">
      <h2>数据依据（用于估算，不是精确采购合同价）</h2>
      <div class="tiny" id="sourceNote"></div>
    </section>
  </main>

  <script src="game.js"></script>
</body>
</html>
